<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>La web del bot abusador</title>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="512x512" href="/favicon-512x512.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="shortcut icon" href="/favicon.ico">
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  background: linear-gradient(to right, #74ebd5, #ACB6E5);
  padding-top:50px;
}
.container {
  background:white;
  padding:30px;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  width:90%;
  max-width:500px;
  text-align:center;
  margin-bottom: 20px;
}
h1, h2 { margin-bottom:20px; }
button { 
  padding:10px 20px; 
  border:none; 
  border-radius:8px; 
  background:#007BFF; 
  color:white; 
  cursor:pointer;
  font-size:1rem;
  margin-top:15px;
}
button:hover { background:#0056b3; }
input { padding:10px; width:80%; border-radius:8px; border:1px solid #ccc; margin-bottom:15px; }
#adminSection { display:none; }
#error { color:red; display:none; margin-top:10px; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th, td { padding: 10px; border-bottom: 1px solid #ccc; text-align: left; }
</style>
</head>
<body>

<div class="container" id="mainSection">
  <img src="logo.png" alt="Logo" 
     style="width:150px; margin-bottom:20px; border-radius:50%;">
  <h1>Admin abuse web</h1>

  <!-- Contenedor de ranking -->
  <h2>üèÜ Top 10 Tokens</h2>
  <table>
    <thead>
      <tr><th>Usuario</th><th>Tokens</th></tr>
    </thead>
    <tbody id="rankingBody">
      <tr><td colspan="2">Cargando...</td></tr>
    </tbody>
  </table>

  <!-- Bot√≥n de admin abajo -->
  <button onclick="showAdminLogin()">Acceder Admin</button>
</div>

<div class="container" id="adminSection">
  <h2>Login Admin</h2>
  <input type="password" id="adminPass" placeholder="Contrase√±a">
  <br>
  <button onclick="checkAdmin()">Entrar</button>
  <div id="error">‚ùå Contrase√±a incorrecta</div>
  <button onclick="goBack()" style="background:#6c757d;">‚¨Ö Volver</button>
</div>

<script>
const ADMIN_PASSWORD = "germangey";

function showAdminLogin() {
  document.getElementById('mainSection').style.display = 'none';
  document.getElementById('adminSection').style.display = 'block';
}

function goBack() {
  document.getElementById('adminSection').style.display = 'none';
  document.getElementById('mainSection').style.display = 'block';
  document.getElementById('adminPass').value = '';
  document.getElementById('error').style.display = 'none';
}

function checkAdmin() {
  const pass = document.getElementById('adminPass').value;
  if(pass === ADMIN_PASSWORD) {
    window.location.href = `/admin?pass=${encodeURIComponent(pass)}`;
  } else {
    document.getElementById('error').style.display = 'block';
  }
}

// Funci√≥n para cargar ranking
async function loadRanking() {
  try {
    const res = await fetch('/ranking');
    const data = await res.json();
    const tbody = document.getElementById('rankingBody');
    tbody.innerHTML = '';
    data.forEach((u, i) => {
      const row = document.createElement('tr');
      row.innerHTML = `<td>${i+1}. ${u.user}</td><td>${u.tokens}</td>`;
      tbody.appendChild(row);
    });
  } catch (err) {
    console.error(err);
    document.getElementById('rankingBody').innerHTML = '<tr><td colspan="2">Error cargando ranking</td></tr>';
  }
}

// Cargar ranking al abrir la p√°gina
loadRanking();
</script>

</body>
</html>
